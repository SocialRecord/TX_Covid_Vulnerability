# Capstone Project

This analysis incorporates data pooled from several federal and state sources to determine if socioeconomic factors, such as poverty and access to food, can explain the prevalence of COVID-19 cases in Texas counties. The unique data set allowed the team to focus on smaller counties to help identify their vulnerability to COVID-19. Itâ€™s crucial to identify these vulnerable counties before their healthcare systems are crippled by this social virus.

__Take a look at [our website](https://thesocialrecord.com) to interact with our dashboards and find more information about each team member__ 


## Executive Summary:
We took previously unliked data from state and federal sources and combined it together to study the interactions between social factors and COVID-19 cases in Texas. 
After just under 2 weeks of analysis, there found there were interesting relationships between:
> - ***Minority Status***
> - ***State ordinances***
> - ***Population size***
> - ***Proximity to either meatpacking plants and/or transportation routes***

Those relationships revealed vulnerabilities in counties with higher __infection percent__ that are less obvious when we were  just looking at counties with __higher case counts__.



## How to Reproduce:
- Have python installed through anaconda
- Clone this repo in your terminal 
- All the data needed to recreate this project is housed in the _Data_ folder
- Some pre-processing of the excel files were done manually so make reading them into pandas easier.


## Deliverables
- [Presentation Slide Deck](https://docs.google.com/presentation/d/1rjJE7jp-79bzpRQdLD-rYrv3pGt0ktIQDZ82SNIsX94/edit?usp=sharing)
- [Website with all of our Tableau dashboards](https://thesocialrecord.com)
- On GitHub repo:
    - Jupyter notebook
    - This Readme file
    - acquire.py
    - prepare.py
    - wrangle.py
    - explore.py
> The .py files act as scripts which contain all the necessary funtions to perform any data transformations, exploration, or plotting



## Project Planning:

Before diving into the project we spent time collaborating on which social factors we thought might have an impact on COVID-19 in Texas. Our combined backgrounds include:

- __Public Health__ 
- __Epidemiology__ 
- __Purchasing Analytics in the Pharmaceutical Industry__
- __Anthropology__ 
- __Statistics__
- __International Politics__

This collection of insights from several diverse fields helped us to create and expansive (but not exhaustive) list of features we deemed important to include for this analysis.


**Acquisition, Prep, and Initial Exploration**
* Collect all files from CDC, USDA, TXDHS
> These files come in formats of either .csv or .xlxs. We downloaded them locally into one folder
* Create a dataframe using pandas for each file
> After each file was collected into the Data folder, we read them into pandas one by one for cleaning and preparation
* Clean and prepare the data to perform aggregations and merge each dataframe together
> _Note: We did did not drop any rows containing null values as that would mean excluding a county from our analysis. We chose to interpret null values as data not provided or non-existent and filled them with "0"._**
* Remove/repair erroneous data
> - Data containing number/string mixture were removed
> - Data types were updated to reflect the true meaning of the numbers
> - Rounding as needed
* Look at shape of data
> The final dataframe is 254 rows (one row for each county in Texas) and 102 columns (the social factors we wanted to explore)

# Exploration
Through a combination of statistical testing and visualizations, we looked for any combination of social factors that could possibly be related to COVID-19 Cases in Texas.
We started with these three initial hypothesis:

## Initial Hypotheses

#### Vulnerability Score
- $H_0$: Vulnerability score is not related to higher infection rate.
- $H_a$: Vulnerability score is related to higher infection rate

#### Population Density
- $H_0$: Population density correlates to higher infection rate
- $H_a$: Population density does not correlate to higher infection rate 

#### Senior Citizens
- $H_0$: Counties with higher population of senior citizens have higher infection rates
- $H_a$: Counties with higher population of senior citizens do not have higher infection rates

As we moved through our exploratory analysis, it became evident that certain features, namely:
- RPL_THEME3 (Minority Status & Language vulnerability as defined by the CDC) and infection percent

Showed some mild correlation.

## Key Findings:
Once we realized that a county's percentage of infection had more of a relationship with RPL_THEME3 (Minority Status & Language vulnerability as defined by the CDC) and population density, we moved our exploration into Tableau.

When examining the location of counties with the highest percentage of infection in Tableau, we noticed that several of them are in very close proximity to major trade routes. Since commerce has seen a massive shift to online sales which is highly reliant on moving products long distances more than ever, we asserted that perhaps counties that see lots of traffic as a result of these trade routes are more susceptible to a higher infection percent

In addition to our find out trade routes, we also realized that several of these high infection percent counties are in close proximity to known outbreaks at meatpacking plants. When plotting some of the largest meatpacking plants in Texas, we noticed a slight coincidence in counties with higher infection percent and the location of those meatpacking plants. 

Overall, we found that these counties with high infection percent and who are classified as having vulnerability in terms of Minority status according to the CDC tend to be smaller counties in terms of population size. 

In other words, some smaller counties in Texas are experiencing a higher infection percent then the larger counties like Harris which have a high number of cases. But these smaller counties are still vulnerable to having their healthcare systems overwhelmed as a small increase in number of cases means that a county can easily go from having 4% of their population infected to 10%. At some point, the small counties will not be able to sustain that level of care and will have to send their patients to larger counties which already have a high case count.

### Technical Skills
- Python 
- Pandas
- Matplotlib
- Seaborn
- Tableau
- Hypothesis testing using:
> - Chi Square
> - Pearson's R
> - T-Test

**Next Steps**
- Include data from jails in each county
- Aggregate case counts by age group 
- Time Series Analysis with Facebook Prophet - Using our social vulnerability index we want to create a model to show weekly growth/decline of COVID per county
- It may also be interesting to use classification, time series, and possibly regression to predict case increases


# Data Dictionary

### Description of all the features in the dataframe
| Feature                            | Datatype | Description                                                                                                                        |
|------------------------------------|----------|------------------------------------------------------------------------------------------------------------------------------------|
| LACCESS_POP15                      | float64  | Number of people in the county that have low access to food                                                                        |
| County                             | object   | County name                                                                                                                        |
| MedHHInc                           | int64    | Median household income                                                                                                            |
| Deep_Pov_All                       | float64  | Average number of people considered to be in Deep poverty                                                                          |
| PovertyUnder18Num                  | int64    | Count of people under 18 in poverty                                                                                                |
| PovertyAllAgesNum                  | int64    | Count of all people in povery                                                                                                      |
| LandAreaSQMiles2010                | int64    | Square miles of each county                                                                                                        |
| TotalPopEst2018                    | int64    | Total population estimate in 2018                                                                                                  |
| Age65AndOlderNum2010               | int64    | Population ages 65 and older in 2018                                                                                               |
| Under18Num2010                     | int64    | Population under 18 years old in 2018                                                                                              |
| NaturalChange1018                  | int64    | Change in population from 2010-2018                                                                                                |
| AvgHHSize                          | float64  | Average household size                                                                                                             |
| TotalOccHU                         | int64    | Total number of occupied housing units, 2014-18                                                                                    |
| OwnHomeNum                         | int64    | Number of owner occupied housing units, 2014-18                                                                                    |
| FemaleHHNum                        | int64    | Number of female headed family households, 2014-18                                                                                 |
| TotalHH                            | int64    | Total number of households, 2014-18                                                                                                |
| NonEnglishHHNum                    | int64    | Number of non-English speaking households, 2014-18                                                                                 |
| HH65PlusAloneNum                   | int64    | Number of persons 65 years or older living alone, 2014-18                                                                          |
| Ed1LessThanHSNum                   | int64    | Percent of persons with no high school diploma or GED, adults 25 and over, 2014-18                                                 |
| Ed2HSDiplomaOnlyNum                | int64    | Percent of persons with a high school diploma or GED only, adults 25 and over, 2014-18                                             |
| Ed3SomeCollegeNum                  | int64    | Percent of persons with some college experience, adults 25 and over, 2014-18                                                       |
| Ed4AssocDegreeNum                  | int64    | Number of persons with an associate's degree, adults 25 and over, 2014-18                                                          |
| Ed5CollegePlusNum                  | int64    | Percent of persons with a 4-year college degree or more, adults 25 and over, 2014-18                                               |
| WhiteNonHispanicNum2010            | int64    | Population size Non-Hispanic White, 2010                                                                                           |
| BlackNonHispanicNum2010            | int64    | Population size Non-Hispanic African American, 2010                                                                                |
| AsianNonHispanicNum2010            | int64    | Population size Non-Hispanic Asian, 2010                                                                                           |
| NativeAmericanNonHispanicNum2010   | int64    | Population size Non-Hispanic Native American, 2010                                                                                 |
| HispanicNum2010                    | int64    | Percent Hispanic, 2010                                                                                                             |
| MultipleRaceNum2010                | int64    | Percent multiple race, 2010                                                                                                        |
| State                              | object   | State                                                                                                                              |
| MedianVetsInc                      | int64    | Median income (In 2018 dollars) of veterans with income in the past 12 months, 2014-18                                             |
| MedianNonVetsInc                   | int64    | Median income (In 2018 dollars) of nonveterans with income in the past 12 months, 2014-18                                          |
| Vets18ONum                         | int64    | Percent of the population that are veterans, 2014-18                                                                               |
| CLFVets18to64Num                   | int64    | Number of veterans age 18 to 64 in the civilian labor force, 2014-18                                                               |
| NonVetsDisabilty                   | int64    | Number of nonveterans age 18 to 64 with a disability, 2014-18                                                                      |
| VetsDisabilty                      | int64    | Number of veterans age 18 to 64 with a disability, 2014-18                                                                         |
| NonVetsPoor                        | int64    | Percent of nonveterans age 18 to 64 with income in the past 12 months at or below poverty level, 2014-18                           |
| VetsPoor                           | int64    | Percent of veterans age 18 to 64 with income in the past 12 months at or below poverty level, 2014-18                              |
| UnempRate2018                      | float64  | Unemployment rate for veterans age 18 to 64, 2014-18                                                                               |
| NumCivLaborforce2018               | int64    | Civilian labor force, 2018                                                                                                         |
| PctEmpAgriculture                  | float64  | Percent of the civilian labor force 16 and over employed in agriculture, forestry, fishing, and hunting, 2014-18                   |
| PctEmpMining                       | float64  | Percent of the civilian labor force 16 and over employed in mining, quarrying, oil and gas extraction, 2014-18                     |
| PctEmpConstruction                 | float64  | Percent of the civilian labor force 16 and over employed in construction, 2014-18                                                  |
| PctEmpManufacturing                | float64  | Percent of the civilian labor force 16 and over employed in manufacturing, 2014-18                                                 |
| PctEmpTrade                        | float64  | Percent of the civilian labor force 16 and over employed in wholesale and retail trade, 2014-18                                    |
| PctEmpTrans                        | float64  | Percent of the civilian labor force 16 and over employed in transportation, warehousing and utilities, 2014-18                     |
| PctEmpInformation                  | float64  | Percent of the civilian labor force 16 and over employed in information services, 2014-18                                          |
| PctEmpFIRE                         | float64  | Percent of the civilian labor force 16 and over employed in finance and insurance, and real estate and rental and leasing, 2014-18 |
| PctEmpServices                     | float64  | Percent of the civilian labor force 16 and over employed in services, 2014-18                                                      |
| PctEmpGovt                         | float64  | Percent of the civilian labor force 16 and over employed in public administration, 2014-18                                         |
| RuralUrbanContinuumCode2013        | int64    | Rural-urban continuum code, 2013 (Scale of how rural or urban a county is)                                                         |
| UrbanInfluenceCode2013             | int64    | Urban influence code, 2003 (Scale of how much urban influence a county has)                                                        |
| Metro2013                          | int64    | Boolean of is metropolitan area or not                                                                                             |
| Micropolitan2013                   | int64    | Boolean of is micropolitan area or not                                                                                             |
| Type_2015_Farming_NO               | int64    | Boolean of is Farming-dependent 2015                                                                                               |
| Type_2015_Manufacturing_NO         | int64    | Boolean of is Manufacturing-dependent 2015                                                                                         |
| Type_2015_Mining_NO                | int64    | Boolean of is Mining-dependent 2015                                                                                                |
| Type_2015_Government_NO            | int64    | Boolean of is Federal/State government-dependent 2015                                                                              |
| Type_2015_Recreation_NO            | int64    | Boolean of is considered a county for recreation or not                                                                            |
| Low_Employment_2015_update         | int64    | Low employment counties                                                                                                            |
| Population_loss_2015_update        | int64    | Boolean of if the county experienced population loss                                                                               |
| Retirement_Destination_2015_Update | int64    | Boolean of if the county is considered a retirement destination                                                                    |
| HiAmenity                          | int64    | High natural amenities                                                                                                             |
| Metro_Adjacent2013                 | int64    | Nonmetro, adjacent to metro area, 2003                                                                                             |
| num_hospitals                      | int64    | Number of hospitals in each county                                                                                                 |
| population                         | int64    | Total population of each county                                                                                                    |
| num_covid_cases                    | int64    | Number of Covid cases in each county                                                                                               |
| infection_pct                      | float64  | Percent of county with positive Covid cases                                                                                        |
| num_nursing_homes                  | int64    | Number of nursing homes per county                                                                                                 |
| total_tests                        | int64    | Total number of tests administered per county                                                                                      |
| cases_per_1k                       | float64  | Number of positive cases per 1,000 inhabitants                                                                                     |
| cases_per_10k                      | float64  | Number of positive cases per 10,000 inhabitants                                                                                    |
| cases_per_100k                     | float64  | Number of positive cases per 100,000 inhabitants                                                                                   |
| positivity_rate                    | float64  | Percent of positives tests out of all tests                                                                                        |
| pop_density                        | float64  | Population density per county                                                                                                      |
| low_food_access_pct                | float64  | Percent of county considered to have low access to grocery stores                                                                  |
| pov_under_18_pct                   | float64  | Percent of people under 18 living in poverty by county                                                                             |
| pov_pct                            | float64  | Percent of people living in poverty by county                                                                                      |
| senior_pct                         | float64  | Percent of people 65 and older in each county                                                                                      |
| children_pct                       | float64  | Percent of people under 18 years old in each county                                                                                |
| home_owner_pct                     | float64  | Percent of people who are home owners in each county                                                                               |
| renter_pct                         | float64  | Percent of people who are renters in each county                                                                                   |
| female_hh_pct                      | float64  | Percent of home owners who are female in each county                                                                               |
| senior_hh_pct                      | float64  | Percent of home owners who are age 65 and older in each county                                                                     |
| non_english_hh_pct                 | float64  | Percent of home owners who are non English speakers in each county                                                                 |
| RPL_THEME1                         | float64  | Socioeconomic vulnerability as defined by the CDC                                                                                  |
| RPL_THEME2                         | float64  | Household Composition & Disability vulnerability as defined by the CDC                                                             |
| RPL_THEME3                         | float64  | Minority Status & Language vulnerability as defined by the CDC                                                                     |
| RPL_THEME4                         | float64  | Housing Type & Transportation vulnerability as defined by the CDC                                                                  |
| RPL_THEMES                         | float64  | Overall tract summary ranking variable vulnerability as defined by the CDC                                                         |
| white_pct                          | float64  | Percent white people in each county                                                                                                |
| black_pct                          | float64  | Percent black people in each county                                                                                                |
| asian_pct                          | float64  | Percent assign people in each county                                                                                               |
| nat_am_pct                         | float64  | Percent Native American people in each county                                                                                      |
| med_inc_vet_vs_civ                 | float64  | Ratio of veteran income to non veteran income                                                                                      |
| all_vet_pct                        | float64  | Percent of population that are veterans                                                                                            |
| disabled_pct                       | float64  | Percent of population that are disabled                                                                                            |
| poor_vets_pct                      | float64  | Percent of population are poor veterans                                                                                            |
| pop_density_category               | category | Calculated columns denoting if county pop density is high, mid or low                                                              |
| infection_pct_category             | category | Calculated columns denoting if county infection percent is high, mid or low                                                        |


### CDC SVI Scores explained

![CDC SVI Scores](https://github.com/SocialRecord/TX_Covid_Vulnerability/blob/master/jada/CDC_SVI.png "CDC SVI infographic")

__[Click Here for further reading on SVI scores](https://svi.cdc.gov)__